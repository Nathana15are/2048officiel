*{box-sizing:border-box}
:root{
  --txt:#fff;
  --glow:#00ffff;
  --bg1:#141427;
  --bg2:#2a1f4d;
  --tile:#3b3b57;
  --tileTxt:#fff;
}
@media (prefers-color-scheme: dark){
  :root{--txt:#eaeaf7}
}
html,body{height:100%;margin:0}
body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--txt);
  background:#0b0b16;
  overflow-x:hidden;
}
#bgCanvas{
  position:fixed; inset:0; z-index:-1;
  background:linear-gradient(135deg,#1a2a6c,#b21f1f,#1a2a6c,#0f9b0f);
  background-size:400% 400%;
  animation:bgShift 16s ease infinite;
  filter:brightness(0.9) saturate(1.2);
}
@keyframes bgShift{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.top{
  max-width:1000px; margin:14px auto; padding:0 16px;
  display:flex; align-items:center; justify-content:space-between;
}
h1{margin:0; text-shadow:0 0 10px var(--glow), 0 0 25px rgba(0,255,255,.35)}
.spark{filter:drop-shadow(0 0 10px #ff0)}

.likes{display:flex; align-items:center; gap:10px}
#likeBtn{
  background:transparent; border:1px solid rgba(255,255,255,.25);
  padding:8px 12px; border-radius:8px; cursor:pointer; color:var(--txt);
  backdrop-filter: blur(4px);
}
#likeBtn:hover{border-color:var(--glow); box-shadow:0 0 16px rgba(0,255,255,.2)}
#likeCount{min-width:22px; display:inline-block; text-align:center; font-weight:700}

main{max-width:1000px; margin:0 auto; padding:16px}

.card{
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border:1px solid rgba(255,255,255,.12);
  padding:18px; border-radius:14px; 
  box-shadow:0 0 30px rgba(0,0,0,.25), 0 0 24px rgba(0,255,255,.08);
}
.hidden{display:none !important}
.hint,.subhint{opacity:.8}

.btn-row{display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-top:10px}
button.primary{
  background:linear-gradient(90deg,#00ffff,#ff00ff);
  color:#000; border:none; border-radius:10px; padding:10px 14px; cursor:pointer; font-weight:700;
  box-shadow:0 0 18px rgba(0,255,255,.35);
}
button.ghost{
  background:transparent; color:var(--txt); border:1px solid rgba(255,255,255,.25);
  padding:10px 14px; border-radius:10px; cursor:pointer;
}
button.share{
  background:linear-gradient(90deg,#00ff95,#00ffff);
  color:#000; border:none; border-radius:10px; padding:10px 14px; cursor:pointer; font-weight:700;
  box-shadow:0 0 18px rgba(0,255,180,.35);
}

.hud{display:flex; gap:14px; flex-wrap:wrap; justify-content:center; margin-bottom:10px}
.grid{
  width:min(92vw,480px);
  margin:10px auto 14px;
  display:grid; gap:8px;
  grid-template-columns: repeat(4, 1fr);
  background:rgba(0,0,0,.35);
  padding:10px; border-radius:12px;
  box-shadow: inset 0 0 22px rgba(0,0,0,.35), 0 0 24px rgba(0,255,255,.15);
  touch-action: none; /* pour Ã©viter le scroll pendant swipe */
}
.tile{
  aspect-ratio:1/1;
  display:flex; align-items:center; justify-content:center;
  background:var(--tile);
  color:var(--tileTxt);
  border-radius:8px; font-weight:900; font-size:clamp(16px,5vw,26px);
  text-shadow:0 1px 0 rgba(0,0,0,.3);
  box-shadow:0 0 12px rgba(0,255,255,.12);
  transition: transform .12s ease, background .2s ease, box-shadow .2s ease;
}
.tile.new{animation:pop .18s ease}
@keyframes pop{0%{transform:scale(.6)}100%{transform:scale(1)}}
.tile.merged{animation:boom .18s ease}
@keyframes boom{0%{transform:scale(1.1)}100%{transform:scale(1)}}

.actions{display:flex; gap:10px; justify-content:center}
.msg{min-height:1.2em; text-align:center}

.overlay{
  position:fixed; inset:0; display:grid; place-items:center;
  background:rgba(0,0,0,.6); backdrop-filter: blur(4px);
}
.modal{
  width:min(92vw,720px);
  background: linear-gradient(180deg, rgba(0,0,0,.65), rgba(0,0,0,.45));
  border:1px solid rgba(255,255,255,.2);
  border-radius:14px; box-shadow:0 0 24px rgba(0,255,255,.18);
}
.modal-head{display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid rgba(255,255,255,.15)}
.modal-body{padding:14px}
.icon{background:transparent; color:var(--txt); border:1px solid rgba(255,255,255,.25); border-radius:8px; padding:6px 10px; cursor:pointer}
.table{width:100%; border-collapse: collapse; margin-top:10px}
.table th,.table td{border-bottom:1px solid rgba(255,255,255,.1); padding:8px; text-align:left}
.table tbody tr:nth-child(1) td{color:#ffdd55; font-weight:800}
.table tbody tr:nth-child(2) td{color:#c0c0c0; font-weight:700}
.table tbody tr:nth-child(3) td{color:#cd7f32; font-weight:700}
